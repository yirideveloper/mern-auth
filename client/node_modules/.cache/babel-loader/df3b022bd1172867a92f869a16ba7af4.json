{"ast":null,"code":"import _regeneratorRuntime from \"/home/flav/Projects/Update/mern-authentification/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/flav/Projects/Update/mern-authentification/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/home/flav/Projects/Update/mern-authentification/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/flav/Projects/Update/mern-authentification/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/flav/Projects/Update/mern-authentification/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/flav/Projects/Update/mern-authentification/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/flav/Projects/Update/mern-authentification/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/flav/Projects/Update/mern-authentification/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/flav/Projects/Update/mern-authentification/client/src/components/pages/LoginResetPassword/LoginResetPassword.jsx\";\nimport React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport Joi from \"joi-browser\";\nimport Form from \"../../common/form/form.jsx\";\nimport { attemptResetPassword as _attemptResetPassword } from \"../../../store/thunks/auth\";\nimport styles from \"./LoginResetPassword.module.css\";\n\nvar LoginForgot =\n/*#__PURE__*/\nfunction (_Form) {\n  _inherits(LoginForgot, _Form);\n\n  function LoginForgot() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LoginForgot);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LoginForgot)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data: {\n        password: \"\"\n      },\n      errors: {}\n    };\n    _this.schema = {\n      password: Joi.string().min(5).max(255).required()\n    };\n    _this.doSubmit =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var data, token, password;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              data = _this.state.data;\n              token = _this.props.match.params.token;\n              password = data.password;\n              _context.next = 5;\n              return _this.props.attemptResetPassword(password, token).catch(function (error) {\n                if (error.response && error.response.status === 400) {\n                  var errors = _objectSpread({}, _this.state.errors);\n\n                  errors.password = error.response.data.message;\n\n                  _this.setState({\n                    errors: errors\n                  });\n                }\n              });\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _this;\n  }\n\n  _createClass(LoginForgot, [{\n    key: \"render\",\n    value: function render() {\n      if (this.props.isAuth) return React.createElement(Redirect, {\n        to: \"/home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }); // ne peut pas se relog si deja log\n\n      return React.createElement(\"div\", {\n        id: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        id: styles.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38\n        },\n        __self: this\n      }, \"New password\"), React.createElement(\"div\", {\n        id: styles.formContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        className: \"ui large form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, this.renderInput(\"password\", \"Password\", \"password\", \"lock icon\"), this.renderButton(\"RESET PASSWORD\"))));\n    }\n  }]);\n\n  return LoginForgot;\n}(Form);\n\nfunction mapStateToProps(_ref2) {\n  var user = _ref2.user;\n  return {\n    isAuth: user.isAuth\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    attemptResetPassword: function attemptResetPassword(password, token) {\n      return dispatch(_attemptResetPassword(password, token));\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForgot);","map":{"version":3,"sources":["/home/flav/Projects/Update/mern-authentification/client/src/components/pages/LoginResetPassword/LoginResetPassword.jsx"],"names":["React","Redirect","connect","Joi","Form","attemptResetPassword","styles","LoginForgot","state","data","password","errors","schema","string","min","max","required","doSubmit","token","props","match","params","catch","error","response","status","message","setState","isAuth","container","title","formContainer","handleSubmit","renderInput","renderButton","mapStateToProps","user","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport Joi from \"joi-browser\";\nimport Form from \"../../common/form/form.jsx\";\nimport { attemptResetPassword } from \"../../../store/thunks/auth\";\nimport styles from \"./LoginResetPassword.module.css\";\nclass LoginForgot extends Form {\n  state = {\n    data: { password: \"\" },\n    errors: {}\n  };\n\n  schema = {\n    password: Joi.string()\n      .min(5)\n      .max(255)\n      .required()\n  };\n\n  doSubmit = async () => {\n    const { data } = this.state;\n    const token = this.props.match.params.token;\n    const password = data.password;\n    await this.props.attemptResetPassword(password, token).catch(error => {\n      if (error.response && error.response.status === 400) {\n        const errors = { ...this.state.errors };\n        errors.password = error.response.data.message;\n        this.setState({ errors });\n      }\n    });\n  };\n\n  render() {\n    if (this.props.isAuth) return <Redirect to=\"/home\" />; // ne peut pas se relog si deja log\n    return (\n      <div id={styles.container}>\n        <p id={styles.title}>New password</p>\n        <div id={styles.formContainer}>\n          <form onSubmit={this.handleSubmit} className=\"ui large form\">\n            {this.renderInput(\"password\", \"Password\", \"password\", \"lock icon\")}\n            {this.renderButton(\"RESET PASSWORD\")}\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps({ user }) {\n  return {\n    isAuth: user.isAuth\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    attemptResetPassword: (password, token) =>\n      dispatch(attemptResetPassword(password, token))\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(LoginForgot);\n"]},"metadata":{},"sourceType":"module"}